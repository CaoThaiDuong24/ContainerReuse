# üß™ H∆∞·ªõng d·∫´n Test API Depot

## ‚úÖ T√≥m t·∫Øt ki·ªÉm tra

API Depot c·ªßa b·∫°n **ƒë√£ ho·∫°t ƒë·ªông ƒë·∫ßy ƒë·ªß** v·ªõi c√°c ch·ª©c nƒÉng:

### Backend API Endpoints
- ‚úÖ `GET /api/iContainerHub_Depot` - L·∫•y t·∫•t c·∫£ depot
- ‚úÖ `GET /api/iContainerHub_Depot/:id` - L·∫•y depot theo ID
- ‚úÖ `GET /api/iContainerHub_Depot/statistics` - L·∫•y th·ªëng k√™
- ‚úÖ `GET /api/iContainerHub_Depot/provinces` - L·∫•y danh s√°ch t·ªânh
- ‚úÖ `POST /api/iContainerHub_Depot` - T·∫°o depot m·ªõi
- ‚úÖ `PUT /api/iContainerHub_Depot/:id` - C·∫≠p nh·∫≠t depot
- ‚úÖ `DELETE /api/iContainerHub_Depot/:id` - X√≥a depot

### Frontend Integration
- ‚úÖ Service layer (`depotService.ts`) - ƒê√£ t·∫°o
- ‚úÖ UI Component (`containers/page.tsx`) - ƒê√£ c√≥ s·∫µn
- ‚úÖ Data fetching & display - ƒê√£ ho·∫°t ƒë·ªông

---

## üöÄ C√°ch test API

### 1. Kh·ªüi ƒë·ªông Backend Server

```bash
# Trong th∆∞ m·ª•c backend
cd backend
npm install
npm run dev
```

Server s·∫Ω ch·∫°y t·∫°i: `http://localhost:5000`

### 2. Ch·∫°y file test t·ª± ƒë·ªông

```bash
# Trong th∆∞ m·ª•c backend
node src/test-depot-api.js
```

File n√†y s·∫Ω test t·∫•t c·∫£ endpoints v√† hi·ªÉn th·ªã k·∫øt qu·∫£.

### 3. Test b·∫±ng Browser

M·ªü tr√¨nh duy·ªát v√† truy c·∫≠p:

**L·∫•y t·∫•t c·∫£ depot:**
```
http://localhost:5000/api/iContainerHub_Depot
```

**L·∫•y th·ªëng k√™:**
```
http://localhost:5000/api/iContainerHub_Depot/statistics
```

**L·∫•y danh s√°ch t·ªânh:**
```
http://localhost:5000/api/iContainerHub_Depot/provinces
```

**L·∫•y depot theo ID:**
```
http://localhost:5000/api/iContainerHub_Depot/DEPOT001
```

**L·ªçc theo t·ªânh:**
```
http://localhost:5000/api/iContainerHub_Depot?province=TP. H·ªì Ch√≠ Minh
```

**T√¨m ki·∫øm:**
```
http://localhost:5000/api/iContainerHub_Depot?search=LONG GIANG
```

### 4. Test b·∫±ng cURL (Command Line)

**L·∫•y t·∫•t c·∫£ depot:**
```bash
curl http://localhost:5000/api/iContainerHub_Depot
```

**T·∫°o depot m·ªõi:**
```bash
curl -X POST http://localhost:5000/api/iContainerHub_Depot \
  -H "Content-Type: application/json" \
  -d "{\"name\":\"DEPOT TEST\",\"location\":\"Test\",\"address\":\"Test Address\",\"image\":\"https://example.com/image.jpg\",\"containerCount\":50,\"capacity\":100,\"status\":\"active\",\"province\":\"TP. H·ªì Ch√≠ Minh\"}"
```

**C·∫≠p nh·∫≠t depot:**
```bash
curl -X PUT http://localhost:5000/api/iContainerHub_Depot/DEPOT001 \
  -H "Content-Type: application/json" \
  -d "{\"containerCount\":200}"
```

**X√≥a depot:**
```bash
curl -X DELETE http://localhost:5000/api/iContainerHub_Depot/DEPOT013
```

### 5. Test b·∫±ng Postman

1. Import c√°c request sau v√†o Postman:

**GET All Depots**
- Method: `GET`
- URL: `http://localhost:5000/api/iContainerHub_Depot`

**GET Depot by ID**
- Method: `GET`
- URL: `http://localhost:5000/api/iContainerHub_Depot/DEPOT001`

**POST Create Depot**
- Method: `POST`
- URL: `http://localhost:5000/api/iContainerHub_Depot`
- Headers: `Content-Type: application/json`
- Body (JSON):
```json
{
  "name": "DEPOT TEST",
  "location": "Test Location",
  "address": "Test Address 123",
  "image": "https://images.unsplash.com/photo-1566576721346-d4a3b4eaeb55",
  "containerCount": 50,
  "capacity": 100,
  "status": "active",
  "province": "TP. H·ªì Ch√≠ Minh"
}
```

---

## üìä D·ªØ li·ªáu m·∫´u (Mock Data)

API hi·ªán ƒëang s·ª≠ d·ª•ng 12 depot m·∫´u:

1. DEPOT001 - LONG GIANG (TI·ªÄN GIANG) - 127/500
2. DEPOT002 - DEPOT PH∆Ø·ªöC ƒê√îNG - 284/450
3. DEPOT003 - DEPOT PH√ö M·ª∏ - 456/600
4. DEPOT004 - DEPOT C√ÅI M√âP - 672/800
5. DEPOT005 - DEPOT B√åNH D∆Ø∆†NG - 398/550
6. DEPOT006 - DEPOT ƒê·ªíNG NAI - 521/700
7. DEPOT007 - DEPOT C√ÅT L√ÅI - 891/1000
8. DEPOT008 - DEPOT HI·ªÜP PH∆Ø·ªöC - 612/750
9. DEPOT009 - DEPOT T√ÇN C·∫¢NG - 734/850
10. DEPOT010 - DEPOT LONG AN - 189/400
11. DEPOT011 - DEPOT Vƒ®NH PH∆Ø·ªöC - 143/350
12. DEPOT012 - DEPOT H·∫¢I PH√íNG - 567/700

---

## üéØ Test Frontend

### 1. Kh·ªüi ƒë·ªông Frontend

```bash
# Trong th∆∞ m·ª•c frontend
cd frontend
npm install
npm run dev
```

Frontend s·∫Ω ch·∫°y t·∫°i: `http://localhost:3000`

### 2. Truy c·∫≠p trang Containers

```
http://localhost:3000/dashboard/containers
```

T·∫°i ƒë√¢y b·∫°n c√≥ th·ªÉ:
- ‚úÖ Xem danh s√°ch depot
- ‚úÖ L·ªçc theo t·ªânh
- ‚úÖ T√¨m ki·∫øm depot
- ‚úÖ Xem chi ti·∫øt depot
- ‚úÖ Xem container trong m·ªói depot

---

## üîß S·ª≠ d·ª•ng Depot Service trong Frontend

B·∫°n c√≥ th·ªÉ import v√† s·ª≠ d·ª•ng `depotService.ts` trong c√°c component:

```typescript
import { 
  fetchDepots, 
  fetchDepotById, 
  fetchDepotStatistics,
  fetchProvinces,
  createDepot,
  updateDepot,
  deleteDepot
} from '@/lib/depotService'

// L·∫•y t·∫•t c·∫£ depot
const result = await fetchDepots()
if (result.success && result.data) {
  console.log(result.data)
}

// L·ªçc theo t·ªânh
const filtered = await fetchDepots({ province: 'TP. H·ªì Ch√≠ Minh' })

// T√¨m ki·∫øm
const searched = await fetchDepots({ search: 'LONG GIANG' })

// L·∫•y th·ªëng k√™
const stats = await fetchDepotStatistics()
console.log(stats.data)

// T·∫°o depot m·ªõi
const newDepot = await createDepot({
  name: 'DEPOT NEW',
  location: 'Location',
  address: 'Address',
  image: 'https://example.com/image.jpg',
  containerCount: 100,
  capacity: 200,
  status: 'active',
  province: 'TP. H·ªì Ch√≠ Minh'
})
```

---

## üìù Response Format

T·∫•t c·∫£ API tr·∫£ v·ªÅ format:

```json
{
  "success": true,
  "count": 12,
  "data": [...]
}
```

Ho·∫∑c khi c√≥ l·ªói:

```json
{
  "success": false,
  "message": "Error message",
  "error": "Detailed error"
}
```

---

## ‚úÖ K·∫øt lu·∫≠n

API Depot c·ªßa b·∫°n ƒë√£ ho√†n to√†n s·∫µn s√†ng s·ª≠ d·ª•ng! 

- ‚úÖ Backend API ƒë√£ ho·∫°t ƒë·ªông t·ªët
- ‚úÖ Frontend ƒë√£ t√≠ch h·ª£p v√† hi·ªÉn th·ªã d·ªØ li·ªáu
- ‚úÖ Service layer ƒë√£ ƒë∆∞·ª£c t·∫°o ƒë·ªÉ s·ª≠ d·ª•ng l·∫°i
- ‚úÖ File test t·ª± ƒë·ªông ƒë√£ s·∫µn s√†ng

Ch·ªâ c·∫ßn kh·ªüi ƒë·ªông backend v√† frontend ƒë·ªÉ s·ª≠ d·ª•ng!
