# ğŸ” Debug Guide - Container Matching Issue

## Váº¥n Ä‘á»
Danh sÃ¡ch container trong depot khÃ´ng hiá»ƒn thá»‹

## CÃ¡c bÆ°á»›c debug

### 1. âœ… Kiá»ƒm tra Backend
Backend Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t vá»›i log chi tiáº¿t. Cáº§n restart Ä‘á»ƒ Ã¡p dá»¥ng changes:

```powershell
# Tá»« thÆ° má»¥c backend
cd "D:\DiskE\DU AN CONTAINER\containerreseu\backend"

# Kill process hiá»‡n táº¡i
Get-NetTCPConnection -LocalPort 5000 -ErrorAction SilentlyContinue | Select-Object -ExpandProperty OwningProcess | ForEach-Object { Stop-Process -Id $_ -Force }

# Start láº¡i backend
npm start
```

### 2. âœ… Má»Ÿ Debug Page
Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p:
**http://localhost:3000/dashboard/debug-data**

Trang nÃ y sáº½ hiá»ƒn thá»‹:
- Tá»•ng sá»‘ depot vÃ  container
- Táº¥t cáº£ depot IDs vÃ  kiá»ƒu dá»¯ liá»‡u
- Container depot IDs (unique)
- Matching analysis cho tá»«ng depot
- Raw data Ä‘á»ƒ kiá»ƒm tra

### 3. ğŸ” Kiá»ƒm tra Log trong Browser Console

Khi vÃ o trang depot detail (vÃ­ dá»¥: `/dashboard/containers/15`):

Browser console sáº½ hiá»ƒn thá»‹:
```
[ContainerService] ===== FETCHING CONTAINERS FOR DEPOT =====
[ContainerService] Target depot ID: 15 Type: string
[ContainerService] Total containers from API: XXX
[ContainerService] All unique depot IDs in data: [15, 1, 3, ...]
[ContainerService] Sample containers (first 5):
  - Container ABCD1234: depotId="15" (type: string), depotName="..."
[ContainerService] âœ… MATCH FOUND: ...
[ContainerService] ===== FILTER RESULT =====
[ContainerService] Filtered containers count: XXX
```

### 4. ğŸ” Kiá»ƒm tra Backend Log

Terminal cháº¡y backend sáº½ hiá»ƒn thá»‹:
```
âœ… Reuse container list retrieved successfully
ğŸ“Š Containers count: XXX
ğŸ“ Containers by Depot ID: { '15': 50, '1': 30, '3': 20, ... }
```

## Váº¥n Ä‘á» cÃ³ thá»ƒ gáº·p pháº£i

### A. Depot ID khÃ´ng khá»›p
**NguyÃªn nhÃ¢n:** Depot API tráº£ vá» ID kiá»ƒu sá»‘ (15) nhÆ°ng Container API tráº£ vá» kiá»ƒu chuá»—i ("15")

**Giáº£i phÃ¡p:** ÄÃ£ fix báº±ng cÃ¡ch convert cáº£ 2 sang string:
```typescript
String(container.depotId) === String(depotId)
```

### B. Backend chÆ°a restart
**NguyÃªn nhÃ¢n:** Code má»›i chÆ°a Ä‘Æ°á»£c load

**Giáº£i phÃ¡p:** Restart backend theo bÆ°á»›c 1

### C. API bÃªn ngoÃ i khÃ´ng tráº£ vá» depotId
**NguyÃªn nhÃ¢n:** External API khÃ´ng cÃ³ field DepotID hoáº·c null

**Giáº£i phÃ¡p:** Check raw data trong debug page

## Expected Result

Khi vÃ o depot detail page, báº¡n sáº½ tháº¥y:
- âœ… Danh sÃ¡ch container cá»§a depot Ä‘Ã³
- âœ… Container count khá»›p vá»›i sá»‘ hiá»ƒn thá»‹ trÃªn depot card
- âœ… Log rÃµ rÃ ng trong console

## Náº¿u váº«n khÃ´ng cÃ³ container

1. Check Debug Page xem depot ID vÃ  container depot ID cÃ³ khá»›p khÃ´ng
2. Check Backend log xem cÃ³ lá»—i khi gá»i external API khÃ´ng
3. Check Browser console xem filter logic cÃ³ cháº¡y Ä‘Ãºng khÃ´ng
4. Verify ráº±ng depot báº¡n click vÃ o cÃ³ containers trong external API

## Test vá»›i depot cÃ³ container

Tá»« debug page, tÃ¬m depot nÃ o cÃ³ `actual > 0` containers rá»“i click vÃ o depot Ä‘Ã³.
